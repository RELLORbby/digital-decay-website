<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Digital Decay</title>
    <link rel="stylesheet" href="index.css" />
    <link rel="icon" href="/assets/svgs/3d-block.svg" type="image/svg+xml" />
    <link rel="icon" href="3d-block.ico" sizes="any" />
  </head>
  <style>
    .img-svg {
      opacity: 0;
      transition: opacity 2s ease-in;
    }

    .fade-in {
      opacity: 1;
    }
  </style>
  <body>
    <div class="svg-container" id="svgContainer">
      <!-- Top SVG: Decay -->
      <div class="draggable" id="decaySvg" draggable="true">
        <div class="tooltip">Decay Interactive Game</div>
        <img class="img-svg" src="assets/svgs/decay.svg" alt="Decay" />
      </div>

      <!-- Bottom row with 3 SVGs -->
      <div class="row">
        <div class="draggable" id="blockSvg" draggable="true">
          <div class="tooltip">3D Models Gallery</div>
          <img class="img-svg" src="assets/svgs/3d-block.svg" alt="3D Block" />
        </div>
        <div class="draggable" id="gridSvg" draggable="true">
          <div class="tooltip">Leaflet</div>
          <img class="img-svg" src="assets/svgs/grid.svg" alt="Grid" />
        </div>
        <div class="draggable" id="timerSvg" draggable="true">
          <div class="tooltip">Animation</div>
          <img class="img-svg" src="assets/svgs/timer.svg" alt="Timer" />
        </div>
      </div>
    </div>

    <!-- Action Icons with Larger Drop Zones -->
    <div class="drop-zone" id="saveZone"></div>
    <div class="drop-zone" id="deleteZone"></div>

    <img
      src="assets/svgs/save.svg"
      alt="Save"
      class="action-icon img-svg"
      id="saveIcon"
    />
    <img
      src="assets/svgs/delete.svg"
      alt="Delete"
      class="action-icon img-svg"
      id="deleteIcon"
    />

    <!-- Screens -->
    <div class="screen" id="gameScreen">
      <iframe
        src="game.html"
        style="width: 100%; height: 100%; border: none"
      ></iframe>
    </div>

    <div class="screen" id="gridScreen">
      <button class="back-button" id="gridBackButton">←</button>
      <div id="leafletContent">
        <!-- Document viewer -->
        <div id="document-container">
          <div id="manual-viewer">
            <img
              src="assets/manual.png"
              alt="Manual Document"
              id="document-image"
            />
          </div>
        </div>
        <div class="controls">
          <button class="control-btn" id="zoom-in">+</button>
          <div class="zoom-level" id="zoom-level">100%</div>
          <button class="control-btn" id="zoom-out">-</button>
          <button class="control-btn" id="reset-view">Reset</button>
        </div>
      </div>
    </div>

    <div class="screen" id="timerScreen">
      <button class="back-button" id="timerBackButton">←</button>
      <video controls width="80%" height="auto" autoplay>
        <source src="assets/final-outcome.mp4" type="video/mp4" />
        Your browser does not support the video tag.
      </video>
    </div>

    <div class="screen" id="modelScreen">
      <button class="back-button" id="modelBackButton">←</button>
      <div class="model-container" id="modelContainer">
        <!-- Will be populated with 3D models from assets/blender/objects -->
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/MTLLoader.js"></script>
    <script src="index.js"></script>
    <script>
      window.addEventListener("load", () => {
        document.querySelectorAll(".img-svg").forEach((img) => {
          img.classList.add("fade-in");
        });
      });
    </script>
  </body>
</html>
